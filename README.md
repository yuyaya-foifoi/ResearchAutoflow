# ResearchAutoflow

### Demo

以下のノートブックファイルで使い方を確認してください：
```bash
example/example.ipynb
```

### 注意点

- **環境**: Google Colabでの実行を前提としています
- **必要なライブラリ**: 実験の特性に合わせて必要なライブラリをインストールしてください。最低限以下が必要です：
  ```bash
  !pip install pymupdf PyPDF2 boto3
  ```
- **S3アップロード**: 結果をS3にアップロードするかどうかで、`run_experiment`関数の引数が異なります
  - アップロードする場合: バケット名、フォルダパス、認証情報を指定
  - アップロードしない場合: S3関連のパラメータは省略可能

## ResearchAutoflow - 主な関数と必要な入力


| 入力要素 | 初期コード生成<br>(write_initial_python_code) | コードエラー修正<br>(fix_python_code) | コード改善<br>(improve_python_code) | 実験批評<br>(critic) | 実験サマリー作成<br>(create_experiment_summary) | 実験まとめ<br>(wrap_up) | アイデア更新<br>(update_idea) | 初期アイデア生成<br>(generate_initial_idea) | クエリ生成<br>(generate_query) | 画像分析<br>(explain_image) |
|---------|----------|----------|----------|----------|----------|----------|----------|----------|----------|----------|
| idea（研究アイデア） | ○ | × | ○ | × | × | × | ○ | ○ | ○ | × |
| code（Python実験コード） | × | ○ | ○ | ○ | × | × | ○ | × | × | ○ |
| code_desc（コードの説明） | × | × | ○ | ○ | × | × | ○ | × | × | ○ |
| experiment.png（実験結果画像） | × | × | × | × | × | × | × | × | × | ○ |
| experiment_explanation（実験結果説明） | × | × | ○ | ○ | × | × | ○ | × | × | × |
| critic_message（批評メッセージ） | × | × | ○ | × | × | × | ○ | × | × | × |
| survey_df（論文サーベイデータ） | × | × | ○ | ○ | × | × | ○ | ○ | × | × |
| experiment_log（実験ログ） | × | × | × | × | ○ | × | × | × | × | × |
| log（実験ログ/総合ログ） | × | × | × | × | × | ○ | × | × | × | × |
| error_message（エラーメッセージ） | × | ○ | × | × | × | × | × | × | × | × |

## 関数の概要説明

1. **初期コード生成** (`write_initial_python_code`): 
   - 研究アイデアをもとに初期実験コードを生成

2. **コードエラー修正** (`fix_python_code`): 
   - エラーが発生したコードとエラーメッセージを元に修正を行う

3. **コード改善** (`improve_python_code`): 
   - 複数の入力要素に基づいて既存コードを改善

4. **実験批評** (`critic`): 
   - 実験コード、説明、結果に基づいて批評を行う

5. **実験サマリー作成** (`create_experiment_summary`): 
   - 実験ログから実験のサマリーを作成

6. **実験まとめ** (`wrap_up`): 
   - 総合ログから実験全体のまとめを作成

7. **アイデア更新** (`update_idea`): 
   - 実験結果や批評に基づいてアイデアを更新

8. **初期アイデア生成** (`generate_initial_idea`): 
   - 初期アイデアとサーベイデータから新しいアイデアを生成

9. **クエリ生成** (`generate_query`): 
   - 研究アイデアから検索クエリを生成

10. **画像分析** (`explain_image`): 
    - 実験結果画像とコードから実験結果を分析・説明